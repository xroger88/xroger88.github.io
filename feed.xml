<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.1.1">Jekyll</generator><link href="/feed.xml" rel="self" type="application/atom+xml" /><link href="/" rel="alternate" type="text/html" /><updated>2020-10-22T17:20:57+09:00</updated><id>/feed.xml</id><entry><title type="html">다형성(Polymorphism)에 대한 이해 (Clojure 언어)</title><link href="/2020/04/20/polymorphism.html" rel="alternate" type="text/html" title="다형성(Polymorphism)에 대한 이해 (Clojure 언어)" /><published>2020-04-20T00:00:00+09:00</published><updated>2020-04-20T00:00:00+09:00</updated><id>/2020/04/20/polymorphism</id><content type="html" xml:base="/2020/04/20/polymorphism.html">&lt;h1&gt;Basic References&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.braveclojure.com/introduction/&quot;&gt;CLOJURE for the BRAVE and TRUE&lt;/a&gt; (2015년) authored by Daniel Higginbotham :
    클로저 개발에 꼭 필요한 것들을 쉽게 자세히 설명해 주는 책! (필독 강추)&lt;/li&gt;
  &lt;li&gt;&lt;b&gt;Programming Clojure&lt;/b&gt; (2918년) authored by Alex Miller with Stuart Halloway and Aaron
    Bedra : 클로저 개발에 크게 기여한 저자들이 작성한 기본 입문서 (필독
    강추)&lt;/li&gt;
  &lt;li&gt;&lt;b&gt;Geting Clojure&lt;/b&gt; (2018년) authored by Russ Olsen : In wild, Stay out of trouble 등
    저자의 경험에서 우러나는 실질적인 부분에 대하여 쉽게 설명이 잘 된 책으로 최근
    출판된 입문서에 해당함 (필독 강추)&lt;/li&gt;
  &lt;li&gt;&lt;b&gt;Elements of Clojure&lt;/b&gt; by Zachary Tellman : 클로저 기본 네이밍 철학, 이디엄(컨벤션), 간접화(indirection), 조합성에 대한 통찰을 주는 책! (필독 강추)&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Polymorphism 이란?&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;다형성(polymorphism)에 대한 정의는 현대 언어에서 중요하게 다루어 진다.
    왜냐하면 다형성을 지원하는 것은 확장 가능하고 유연한 시스템을 만드는데 있어서
    필요하기 때문이다. 폴리모르피즘(어려운 단어)이라고 하는 다형성은 사전적으로는
    단순히 다양한 형태로 변화될 수 있는 것을 의미하는 반면, 프로그래밍 세계의 경우
    의미가 부여된 하나의 기호(함수)가 다양한 환경(조건)에서 그 의미에 맞게 다양한 실체(구현)로
    변화되어 적용이 가능한 것(상태)을 의미한다.&lt;/li&gt;
  &lt;li&gt;클로저 공식 사이트[fn:1]에서 클로저를 소개하면서 다형성에 대하여 다음과 같이
    기술한다: &amp;#8220;다형성은 좋은 것이다. 스위치 구문 및 구조적인 매칭 등은 이해하기
    어려운 코드를 양산하다. 다형성은 확장가능하며 유연한 시스템(코드)를 만들 수
    있게 도와준다. 클로저 멀티메소드는 객체지향 및 타입으로 부터 다형성을 분리해
    낸다. 다중 텍사노미(taxonomies)를 지원하며, 정적/동적 또는 외부속성,
    메타데이타를 통해 분기(dispatch)한다.&amp;#8221;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[fn:1] https://clojure.org&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;다형성을 직관적으로 받아 들이기는 어렵다. 클로저에서 제공하는 멀티메소드를
    만들어서 사용해 보면 대충 다형성이란 어떤 것인지 알 수 있을 것이다.&lt;/li&gt;
  &lt;li&gt;클로저에서 추상화를 하는 주요 방법은 하나의 동작에 부여된 이름(즉 메소드 혹은
    함수)에 하나 이상의 동작 알고리즘을 연관짓는 것이다. 예를들면, 리스트에 대하여
    &lt;code&gt;conj&lt;/code&gt; 동작을 수행하는 알고리즘은 벡터에 대하여 동일한 동작을 수행하는
    알고리즘과 다르지만 같은 동작의 이름으로 통일되게 불리우는 것이 좋다. 왜냐하면
    그러한 동작 알고리즘들은 같은 개념을 구현한 것들이기에 같은 이름으로 불리우는
    것이 합당하다. 즉 &lt;code&gt;conj&lt;/code&gt; 동작은 리스트가 되었건 벡터가 되었건 해당 데이터
    구조에 하나의 요소(아이템)을 추가하는 것을 의미한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Sequences&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;클로저 언어에서 중요한 개념중에 하나는 시퀀스(sequence)이다. 시퀀스는 말그대로
    순서개념, 즉 데이터 아이템를 일렬로 나열할 수 있는 데이터 구조를 의미한다.
    클로저의 기본 데이터 타입인 리스트(list), 벡터(vector), 맵(map), 셋(set) 등은
    내부 구조는 다르지만 &lt;code&gt;seq&lt;/code&gt; 함수를 통해서 시퀀스로 변환이 된다. 맵의 경우
    시퀀스로 변환될 경우 key와 value로 구성된 벡터 아이템의 시퀀스 형태가 된다.&lt;/li&gt;
  &lt;li&gt;클로저는 어떤 콜렉션 타입이 입력되더다도 이를 시퀀스로 변환하여 데이터를 처리하고 결과를
    시퀀스 또는 특정 값으로 반환하는 다양한 함수들을 지원한다. 예들들면, &lt;code&gt;first&lt;/code&gt; 는
    입력이 리스트이건, 벡터이건, 맵 또는 셋이건 이를 &lt;code&gt;seq&lt;/code&gt; 함수를 통해서
    시퀀스로 변환하고 시퀀스의 첫번째 아이템을 결과로 준다. 여기서 맵과 셋에
    대해서 어떤 아이템이 첫번째가 될 것인가는 명시적으로 정할 수는 없지만
    일관성을 보장한다. &lt;code&gt;next&lt;/code&gt;, &lt;code&gt;rest&lt;/code&gt; 의 경우 모두 시퀀스 함수로서 첫번째
    아이템을 제외한 나머지를 시퀀스로 출력한다. &lt;code&gt;cons&lt;/code&gt; 는 임이의
    콜렉션에 아이템을 추가하는데, 콜렉션을 시퀀스로 변환하고 첫번째 자리에
    아이템을 추가한 시퀀스 결과를 반환한다. &lt;code&gt;cons&lt;/code&gt; (construct) 와 &lt;code&gt;conj&lt;/code&gt;
    (conjuntion) 는 유사한 기능을 제공하면서도 다른 점이 있다. &lt;code&gt;cons&lt;/code&gt; 는 시퀀스 함수이며, &lt;code&gt;conj&lt;/code&gt; 는 입력
    콜렉션을 시퀀스로 변환하지 않고 해당 데이타 구조를 유지하면서 새로운 아이템을
    추가한다. 벡터에 &lt;code&gt;conj&lt;/code&gt; 할 경우 새로운 아이템이 맨 뒤에 추가되는 것은 벡터의
    데이타 구조를 유지하면서 추가하기 때문에 그러하다.&lt;/li&gt;
  &lt;li&gt;클로저 러이브러리는 다양한 시퀀스 함수를 제공한다. &lt;code&gt;map&lt;/code&gt; , &lt;code&gt;filter&lt;/code&gt; 를
    포함하여 &lt;code&gt;partition&lt;/code&gt; 등이 대표적인 함수들이다. 공통적인 특징은 입력되는 콜렉션에 따라서
    세부적인 구현을 다르게 할 필요 없이 시퀀스로 변환하여 함수기능을
    구현하다는 것이다. 이러한 시퀀스 함수는 다양한 콜렉션에 대하여 시퀀스 추상화를
    제공한다. 시퀀스 추상화는 콜로저 언어에 있어서 기본적이기에 활용의 폭이 넓다.
    시퀀스 추상화를 통해서 클로저 코드를 읽기 쉽고 간결하게 작성할 수 있으며, 더
    나아가서 &lt;code&gt;lazy sequence&lt;/code&gt; 개념으로 확장되면서 유용성이 더 크다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Multimethods&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;멀티메소드는 코드에 다형성을 도입하기 위한 직접적이면서도 유연한 방식을
    제공한다. &lt;code&gt;defmulti&lt;/code&gt; 는 멀티메소드의 디스페칭(dispatching) 함수를 정의한다.
    디스페칭 함수는 멀티메소드의 입력인자(arguments)에 대하여 디스페칭값을
    반환한다. &lt;code&gt;multimethod&lt;/code&gt; 는 같은 이름으로 다수가 정의될 수 있다. 멀티메소드
    호출시 디스페칭 함수에 입력인자를 적용하여 디스페칭값을 얻고 이를 이용하여
    멀티메소드를 선택하여 호출하는 식으로 동작한다. 디스페칭값과 일치하는
    멀티메스드가 정의되지 않을 경우 컴파일 에러가 난다. 만약에 &lt;code&gt;:default&lt;/code&gt;
    디스페칭값으로 정의된 메소드가 있을 경우 그 메소드가 호출된다.&lt;/li&gt;
  &lt;li&gt;디스페칭값은 어떤 값도 가능하지만 보통 키워드가 많이 사용된다. 키워드로
    적용해야할 메소드를 구분하는 것이 일반적인데 동일 메소드 이름으로 분류(문맥)에
    따라서 구현내용이 달라지는 측면에서 키워드로 분류를 명시적으로 하는 것이
    직관적이고 코드를 이해하기 쉽기 때문이다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Protocols&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;멀티메소드를 이용하여 타입(type) 디스페치를 수행하는 것이 가능할지라도, 타입
    디스페치를 위해서는 프로토콜(protocols) 사용이 더 적합하다. 클로저는
    멀티메소드 보다 더 효율적이며 간결한 구현이 가능하도록 타입 디스페치용
    프로토콜을 제공한다. 멀티메소드는 단지 하나의 다형성이 존재하는 동작이지만
    프로토콜은 하나 이상의 다형적 동작들의 묶음(collection)이다. 프로토콜은 첫번째
    인자의 타입에 따라서 디스페치한다. 어떻게 프로토콜을 정의하는지 이해하기
    위하여, 다음과 같은 예[fn:2]가 도움이 된다. 프로토콜 정의는 자바의 인터페이스
    정의와 유사하며 &lt;code&gt;defprotocol&lt;/code&gt; 로 추상화된 인터페이스 함수를 정의하고, 이러한
    프토토콜을 필요한 타입(혹은 객체)에 &lt;code&gt;extend-type&lt;/code&gt; 정의하여 구현한다.
    또한, &lt;code&gt;extend-protocol&lt;/code&gt; 을 정의하여 한 곳에서 여러가지 타입에 프로토콜을 구현할 수 있다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[fn:2] clojure for the brave and true 책에서 발취됨&lt;/p&gt;
&lt;pre class=&quot;src&quot; lang=&quot;clojure&quot;&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-clojure&quot; data-lang=&quot;clojure&quot;&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ns&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data-psychology&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;defprotocol&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Psychodynamics&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;quot&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;Plumb the inner depths of your data types&amp;amp;quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;thoughts&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;quot&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;The data type&amp;amp;#39;s innermost thoughts&amp;amp;quot;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;feeling-about&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;quot&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;Feeling about self or other&amp;amp;quot;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;; implement the protocol in a specific type&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;extend-type&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;java.lang.String&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Psychodynamics&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;thoughts&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;quot&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;; thinks, &amp;amp;#39;Truly, the character defines the data type&amp;amp;#39;&amp;amp;quot;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;feeling-about&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;quot&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;; is longing for a simpler way of life&amp;amp;quot;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;quot&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;; is envious of &amp;amp;quot; y &amp;amp;quot;&amp;amp;#39;s simpler way of life&amp;amp;quot;))))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;thoughts&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;quot&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;blorb&amp;amp;quot;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;; =&amp;amp;gt; &amp;amp;quot;blorb thinks, &amp;amp;#39;Truly, the character defines the data type&amp;amp;#39;&amp;amp;quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;feeling-about&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;quot&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;schmorb&amp;amp;quot; 2)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;; =&amp;amp;gt; &amp;amp;quot;schmorb is envious of 2&amp;amp;#39;s simpler way of life&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;; if you want default behaviour of this protocol for any type, then&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;extend-type&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;java.lang.Object&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Psychodynamics&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;thoughts&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;quot&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;Maybe the Internet is just a vector for toxoplasmosis&amp;amp;quot;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;feelings-about&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;quot&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;meh&amp;amp;quot;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;quot&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;meh about &amp;amp;quot; y))))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;thoughts&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;; =&amp;amp;gt; &amp;amp;quot;Maybe the Internet is just a vector for toxoplasmosis&amp;amp;quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;feelings-about&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;; =&amp;amp;gt; &amp;amp;quot;meh&amp;amp;quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;feelings-about&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;quot&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;blorb&amp;amp;quot;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;; =&amp;amp;gt; &amp;amp;quot;meh about blorb&amp;amp;quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;; or you can use extend-protocol to define the same protocol for multiple types&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;extend-protocol&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Psychodynamics&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;java.lang.String&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;thoughts&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;quot&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;Truly, the character defines the data type&amp;amp;quot;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;feelings-about&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;quot&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;longing for a simpler way of life&amp;amp;quot;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;quot&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;envious of &amp;amp;quot; y &amp;amp;quot;&amp;amp;#39;s simpler way of life&amp;amp;quot;)))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;java.lang.Object&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;thoughts&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;quot&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;Maybe the Internet is just a vector for toxoplasmosis&amp;amp;quot;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;feelings-about&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;quot&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;meh&amp;amp;quot;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;quot&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;meh about &amp;amp;quot; y))))&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;/pre&gt;
&lt;h1&gt;Records&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;클로저는 맵과 유사한 데이터 타입으로 커스텀 레코드(records)를 제공한다.
    레코드는 맵과 같은 방식으로 키와 값을 연관짓고 키를 이용하여 값을 찾을 수
    있으며, 맵과 같이 한번 만드어지면 변경이 불가능하다, 즉 immutable 하다. 다른
    점은 레코드의 경우 필드(fields)를 정의할 수 있으며 필드는 값을 가질 수 있는
    슬럿(slot)으로서 마치 맵의 키(key)를 명시하는 것과 같다. 또한, 레코드는 하나의
    커스텀 타입으로 프로토콜을 확장할 수 있다는 점이 맵과 다르다.&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;src&quot; lang=&quot;clojure&quot;&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-clojure&quot; data-lang=&quot;clojure&quot;&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ns&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;were-records&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;defrecord&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WereWolf&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;; you can create an instance of this record in three ways&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WereWolf.&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;quot&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;David&amp;amp;quot; &amp;amp;quot;London Tourist&amp;amp;quot;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;; =&amp;amp;gt; #were_records.WereWolf{:name &amp;amp;quot;David&amp;amp;quot;, :title &amp;amp;quot;London Tourist&amp;amp;quot;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gt&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;WereWolf &amp;amp;quot;Jacob&amp;amp;quot; &amp;amp;quot;Lead Shirt Discarder&amp;amp;quot;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;; =&amp;amp;gt; #were_records.WereWolf{:name &amp;amp;quot;Jacob&amp;amp;quot;, :title &amp;amp;quot;Lead Shirt Discarder&amp;amp;quot;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map-&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gt&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;WereWolf {:name &amp;amp;quot;Lucian&amp;amp;quot; :title &amp;amp;quot;CEO of Melodrama&amp;amp;quot;})&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;; =&amp;amp;gt; #were_records.WereWolf{:name &amp;amp;quot;Lucian&amp;amp;quot;, :title &amp;amp;quot;CEO of Melodrama&amp;amp;quot;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;; you can import the records in another namespece, you&amp;amp;#39;ll have to import it.&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ns&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;monster-mash&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:import&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;were_records&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WereWolf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;; Notice that were_records has an underscore, not a dash&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WereWolf.&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;quot&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;David&amp;amp;quot; &amp;amp;quot;London Tourist&amp;amp;quot;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;; =&amp;amp;gt; #were_records.WereWolf{:name &amp;amp;quot;David&amp;amp;quot;, :title &amp;amp;quot;London Tourist&amp;amp;quot;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;


&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;jacob&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gt&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;WereWolf &amp;amp;quot;Jacob&amp;amp;quot; &amp;amp;quot;Lead Shirt Discarder&amp;amp;quot;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;.name&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;jacob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;; =&amp;amp;gt; &amp;amp;quot;Jacob&amp;amp;quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:name&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;jacob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;; =&amp;amp;gt; &amp;amp;quot;Jacob&amp;amp;quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;jacob&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;; =&amp;amp;gt; &amp;amp;quot;Jacob&amp;amp;quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;; When testing for equality, Clojure will check that all fields are equal and that the two comparands have the same type:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;jacob&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gt&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;WereWolf &amp;amp;quot;Jacob&amp;amp;quot; &amp;amp;quot;Lead Shirt Discarder&amp;amp;quot;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;; =&amp;amp;gt; true&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;jacob&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WereWolf.&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;quot&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;David&amp;amp;quot; &amp;amp;quot;London Tourist&amp;amp;quot;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;; =&amp;amp;gt; false&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;jacob&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:name&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;quot&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;Jacob&amp;amp;quot; :title &amp;amp;quot;Lead Shirt Discarder&amp;amp;quot;})&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;; =&amp;amp;gt; false !!! a record is not a map, i.e. it&amp;amp;#39;s a different type !!!&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;; Any function you can use on a map, you can also use on a record&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;assoc&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;jacob&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:title&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;quot&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;Lead Third Wheel&amp;amp;quot;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;; =&amp;amp;gt; #were_records.WereWolf{:name &amp;amp;quot;Jacob&amp;amp;quot;, :title &amp;amp;quot;Lead Third Wheel&amp;amp;quot;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;dissoc&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;jacob&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;; =&amp;amp;gt; {:name &amp;amp;quot;Jacob&amp;amp;quot;} &amp;amp;lt;- that&amp;amp;#39;s not a were_records.WereWolf&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;; REASON is that if you dissoc a record and then try to call a protocol method on the result, the record&amp;amp;#39;s protocol method won&amp;amp;#39;t be called.&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;; you would extend a protocol when defining a record:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;defprotocol&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WereCreature&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;full-moon-behavior&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;defrecord&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WereWolf&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WereCreature&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;full-moon-behavior&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;quot&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;; will howl and murder&amp;amp;quot;)))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;full-moon-behavior&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map-&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gt&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;WereWolf {:name &amp;amp;quot;Lucian&amp;amp;quot; :title &amp;amp;quot;CEO of Melodrama&amp;amp;quot;}))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;; =&amp;amp;gt; &amp;amp;quot;Lucian will howl and murder&amp;amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;/pre&gt;
&lt;ul&gt;
  &lt;li&gt;위 코드의 예[fn:2]에서 보였듯이, 맵을 대상으로 하는 함수는 또한 레코드에 대해서도
    적용 가능하다. 왜냐하면 레코드와 맵의 접근 인터페이스는 동일하기 때문이다.
    그렇다면, 언제 레코드를 사용하고 언제 맵을 사용하는가? 이 질문에 대하여
    일반적으로 동일한 필드를 갖는 맵을 여러번(계속해서) 사용하다면 레코드를
    사용해야 한다. 데이터의 집합은 응용 도메인의 정보를 표현하기 위한 것이므로,
    코드상에서 도메인 개념에 기반한 이름(필드명/레코드명)을 제공하는 것이
    유리하다. 뿐만이 아니라 레코드 접근이 맵을 접근하는 것 보다 더 성능이 좋기에
    더 효율적이다. 또한, 프로토콜을 사용한다면 레코드 생성이 필요하다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Further data types[fn:3] for abstraction&lt;/h1&gt;
&lt;h2&gt;deftype&lt;/h2&gt;
&lt;h2&gt;reify&lt;/h2&gt;
&lt;h2&gt;proxy&lt;/h2&gt;
&lt;p&gt;[fn:3] http://clojure.org/datatypes/&lt;/p&gt;</content><author><name>xroger88</name></author><category term="polymorphism" /><category term="sequence" /><category term="multimethod" /><category term="protocol" /><category term="clojure" /><summary type="html">Basic References CLOJURE for the BRAVE and TRUE (2015년) authored by Daniel Higginbotham : 클로저 개발에 꼭 필요한 것들을 쉽게 자세히 설명해 주는 책! (필독 강추) Programming Clojure (2918년) authored by Alex Miller with Stuart Halloway and Aaron Bedra : 클로저 개발에 크게 기여한 저자들이 작성한 기본 입문서 (필독 강추) Geting Clojure (2018년) authored by Russ Olsen : In wild, Stay out of trouble 등 저자의 경험에서 우러나는 실질적인 부분에 대하여 쉽게 설명이 잘 된 책으로 최근 출판된 입문서에 해당함 (필독 강추) Elements of Clojure by Zachary Tellman : 클로저 기본 네이밍 철학, 이디엄(컨벤션), 간접화(indirection), 조합성에 대한 통찰을 주는 책! (필독 강추) Polymorphism 이란? 다형성(polymorphism)에 대한 정의는 현대 언어에서 중요하게 다루어 진다. 왜냐하면 다형성을 지원하는 것은 확장 가능하고 유연한 시스템을 만드는데 있어서 필요하기 때문이다. 폴리모르피즘(어려운 단어)이라고 하는 다형성은 사전적으로는 단순히 다양한 형태로 변화될 수 있는 것을 의미하는 반면, 프로그래밍 세계의 경우 의미가 부여된 하나의 기호(함수)가 다양한 환경(조건)에서 그 의미에 맞게 다양한 실체(구현)로 변화되어 적용이 가능한 것(상태)을 의미한다. 클로저 공식 사이트[fn:1]에서 클로저를 소개하면서 다형성에 대하여 다음과 같이 기술한다: &amp;#8220;다형성은 좋은 것이다. 스위치 구문 및 구조적인 매칭 등은 이해하기 어려운 코드를 양산하다. 다형성은 확장가능하며 유연한 시스템(코드)를 만들 수 있게 도와준다. 클로저 멀티메소드는 객체지향 및 타입으로 부터 다형성을 분리해 낸다. 다중 텍사노미(taxonomies)를 지원하며, 정적/동적 또는 외부속성, 메타데이타를 통해 분기(dispatch)한다.&amp;#8221; [fn:1] https://clojure.org 다형성을 직관적으로 받아 들이기는 어렵다. 클로저에서 제공하는 멀티메소드를 만들어서 사용해 보면 대충 다형성이란 어떤 것인지 알 수 있을 것이다. 클로저에서 추상화를 하는 주요 방법은 하나의 동작에 부여된 이름(즉 메소드 혹은 함수)에 하나 이상의 동작 알고리즘을 연관짓는 것이다. 예를들면, 리스트에 대하여 conj 동작을 수행하는 알고리즘은 벡터에 대하여 동일한 동작을 수행하는 알고리즘과 다르지만 같은 동작의 이름으로 통일되게 불리우는 것이 좋다. 왜냐하면 그러한 동작 알고리즘들은 같은 개념을 구현한 것들이기에 같은 이름으로 불리우는 것이 합당하다. 즉 conj 동작은 리스트가 되었건 벡터가 되었건 해당 데이터 구조에 하나의 요소(아이템)을 추가하는 것을 의미한다. Sequences 클로저 언어에서 중요한 개념중에 하나는 시퀀스(sequence)이다. 시퀀스는 말그대로 순서개념, 즉 데이터 아이템를 일렬로 나열할 수 있는 데이터 구조를 의미한다. 클로저의 기본 데이터 타입인 리스트(list), 벡터(vector), 맵(map), 셋(set) 등은 내부 구조는 다르지만 seq 함수를 통해서 시퀀스로 변환이 된다. 맵의 경우 시퀀스로 변환될 경우 key와 value로 구성된 벡터 아이템의 시퀀스 형태가 된다. 클로저는 어떤 콜렉션 타입이 입력되더다도 이를 시퀀스로 변환하여 데이터를 처리하고 결과를 시퀀스 또는 특정 값으로 반환하는 다양한 함수들을 지원한다. 예들들면, first 는 입력이 리스트이건, 벡터이건, 맵 또는 셋이건 이를 seq 함수를 통해서 시퀀스로 변환하고 시퀀스의 첫번째 아이템을 결과로 준다. 여기서 맵과 셋에 대해서 어떤 아이템이 첫번째가 될 것인가는 명시적으로 정할 수는 없지만 일관성을 보장한다. next, rest 의 경우 모두 시퀀스 함수로서 첫번째 아이템을 제외한 나머지를 시퀀스로 출력한다. cons 는 임이의 콜렉션에 아이템을 추가하는데, 콜렉션을 시퀀스로 변환하고 첫번째 자리에 아이템을 추가한 시퀀스 결과를 반환한다. cons (construct) 와 conj (conjuntion) 는 유사한 기능을 제공하면서도 다른 점이 있다. cons 는 시퀀스 함수이며, conj 는 입력 콜렉션을 시퀀스로 변환하지 않고 해당 데이타 구조를 유지하면서 새로운 아이템을 추가한다. 벡터에 conj 할 경우 새로운 아이템이 맨 뒤에 추가되는 것은 벡터의 데이타 구조를 유지하면서 추가하기 때문에 그러하다. 클로저 러이브러리는 다양한 시퀀스 함수를 제공한다. map , filter 를 포함하여 partition 등이 대표적인 함수들이다. 공통적인 특징은 입력되는 콜렉션에 따라서 세부적인 구현을 다르게 할 필요 없이 시퀀스로 변환하여 함수기능을 구현하다는 것이다. 이러한 시퀀스 함수는 다양한 콜렉션에 대하여 시퀀스 추상화를 제공한다. 시퀀스 추상화는 콜로저 언어에 있어서 기본적이기에 활용의 폭이 넓다. 시퀀스 추상화를 통해서 클로저 코드를 읽기 쉽고 간결하게 작성할 수 있으며, 더 나아가서 lazy sequence 개념으로 확장되면서 유용성이 더 크다. Multimethods 멀티메소드는 코드에 다형성을 도입하기 위한 직접적이면서도 유연한 방식을 제공한다. defmulti 는 멀티메소드의 디스페칭(dispatching) 함수를 정의한다. 디스페칭 함수는 멀티메소드의 입력인자(arguments)에 대하여 디스페칭값을 반환한다. multimethod 는 같은 이름으로 다수가 정의될 수 있다. 멀티메소드 호출시 디스페칭 함수에 입력인자를 적용하여 디스페칭값을 얻고 이를 이용하여 멀티메소드를 선택하여 호출하는 식으로 동작한다. 디스페칭값과 일치하는 멀티메스드가 정의되지 않을 경우 컴파일 에러가 난다. 만약에 :default 디스페칭값으로 정의된 메소드가 있을 경우 그 메소드가 호출된다. 디스페칭값은 어떤 값도 가능하지만 보통 키워드가 많이 사용된다. 키워드로 적용해야할 메소드를 구분하는 것이 일반적인데 동일 메소드 이름으로 분류(문맥)에 따라서 구현내용이 달라지는 측면에서 키워드로 분류를 명시적으로 하는 것이 직관적이고 코드를 이해하기 쉽기 때문이다. Protocols 멀티메소드를 이용하여 타입(type) 디스페치를 수행하는 것이 가능할지라도, 타입 디스페치를 위해서는 프로토콜(protocols) 사용이 더 적합하다. 클로저는 멀티메소드 보다 더 효율적이며 간결한 구현이 가능하도록 타입 디스페치용 프로토콜을 제공한다. 멀티메소드는 단지 하나의 다형성이 존재하는 동작이지만 프로토콜은 하나 이상의 다형적 동작들의 묶음(collection)이다. 프로토콜은 첫번째 인자의 타입에 따라서 디스페치한다. 어떻게 프로토콜을 정의하는지 이해하기 위하여, 다음과 같은 예[fn:2]가 도움이 된다. 프로토콜 정의는 자바의 인터페이스 정의와 유사하며 defprotocol 로 추상화된 인터페이스 함수를 정의하고, 이러한 프토토콜을 필요한 타입(혹은 객체)에 extend-type 정의하여 구현한다. 또한, extend-protocol 을 정의하여 한 곳에서 여러가지 타입에 프로토콜을 구현할 수 있다. [fn:2] clojure for the brave and true 책에서 발취됨 (ns data-psychology) (defprotocol Psychodynamics &amp;amp;quot;Plumb the inner depths of your data types&amp;amp;quot; (thoughts [x] &amp;amp;quot;The data type&amp;amp;#39;s innermost thoughts&amp;amp;quot;) (feeling-about [x] [x y] &amp;amp;quot;Feeling about self or other&amp;amp;quot;))</summary></entry><entry><title type="html">SQL Server</title><link href="/2020/04/02/sql-server.html" rel="alternate" type="text/html" title="SQL Server" /><published>2020-04-02T00:00:00+09:00</published><updated>2020-04-02T00:00:00+09:00</updated><id>/2020/04/02/sql-server</id><content type="html" xml:base="/2020/04/02/sql-server.html">&lt;p&gt;Microsoft SQL 서버에 대하여 기본 학습이 필요하여 이 문서를 작성합니다.
  학습내용은 &lt;a href=&quot;https://sqlservertutorial.net&quot;&gt;sqlservertutorial.net&lt;/a&gt;에서 제공되는 샘플 DB와 설명을 기초하였으니
  자세한 내용이 필요할 경우 해당 사이트를 참조하기 바랍니다.&lt;/p&gt;
&lt;h1&gt;SQL Express 2019 설치 및 구성&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;윈도우즈 로그인이 아닌 SQL 서버 로그인이 필요할 경우 sa 계정을 활성화 시켜
    주어야 함 (SQL Server Mananagement Studio 설치후 설정 가능)&lt;/li&gt;
  &lt;li&gt;외부에서 SQL 서버 접근이 필요할 경우 TCP 포트를 추가로 설정해 주어야 함 (SQL
    Server Configuration Manager를 활용하여 TCP 사용여부 및 고정포트 설정)
    기본은 동적포트를 사용하고 있기에 고정포트를 사용하도록 하고, 윈도우 방화벽
    inbound 규칙을 추가하여 해당 포트에 대한 접근이 가능하도록 조치해야 함.&lt;/li&gt;
  &lt;li&gt;SQL Server 2019 설치 이후 SQL Server Configuration Manager는
    C:\windows\system32\SQLServerMananger15.msc 사용 (Windows 10 기준)&lt;/li&gt;
  &lt;li&gt;Windows 10 방화벽 설정은 c:\windows\system32\WF.msc 사용&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Sample DB 다운로드 및 SQL Server DB 업로드&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;참조: https://www.sqlservertutorial.net/load-sample-database/&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;BikeStores DB 생성, 스키마 생성, 테이블 정의 및 Sample Data 업로드 수행&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;데이블 생성이나 데이터 업로드이후 Management Studio에서 갱신이 안되는 경우
    재연결 필요&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Table, View, Indexed View&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;복잡한 로직이 들어간 쿼리의 경우, 특히 테이블간의 멀티 조인으로 결과를 얻고자
    하는 경우, 뷰를 생성하여 사용할 수 있다. 뷰의 경우 가상의 테이블 역할을 하기에
    단순 쿼리로 필요한 데이터를 추출할 수 있다. 예를 들면,&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;src&quot; lang=&quot;sql&quot;&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;VIEW&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;product_master&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SCHEMABINDING&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;product_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;product_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;model_year&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;list_price&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;brand_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;category_name&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;production&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;products&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;INNER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;JOIN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;production&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;brands&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;brand_id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;brand_id&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;INNER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;JOIN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;production&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;categories&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;category_id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;category_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;/pre&gt;
&lt;ul&gt;
  &lt;li&gt;products, brands, cateogries 테이블을 조인하여 얻은 결과를 product_master 뷰로
    만든 예를 보여주고 있다. 여기서 WITH SCHEMABINDING은 현재의 뷰에 사용된
    테이블의 스키마가 변경될 경우 우선 해당 뷰를 먼저 삭제하고 진행해야 함을
    의미한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
  &lt;li&gt;'SELECT * FROM product_master' 쿼리를 실행할 경우 products, brands, categories
    테이블이 참조는 것으로 알 수 있다. 자주 변경되지 않는 데이터를 대상으로 성능을
    고려하여 Indexed View를 만들어 사용할 수 있다. 위와 같아 뷰를 만들고,&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;src&quot; lang=&quot;sql&quot;&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;UNIQUE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CLUSTERED&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INDEX&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ucidx_product_id&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;production&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;product_master&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;product_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;/pre&gt;
&lt;ul&gt;
  &lt;li&gt;위 명령을 이용하여 클러스터드 INDEX를 만들어서 뷰의 내용을 인덱스화하여 별도 저장하므로서 읽기 성능을 높일 수 있다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Indexes&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;인덱스는 쿼리 속도를 높이기 위하여 요구되는 테이블/뷰에 연관된 특별한 데이터 구조, 즉 B-Tree (Balanced Tree)이다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Clustered Indexes vs. NonClustered Indexes&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Primary Key가 지정되지 않은 테이블의 열(Row)은 Heap라고 불리는 정렬되지 않은
    구조에 저장이 된다. 따라서, 테이블 쿼리에 대하여 순차스캔을 진행하므로
    데이터가 많을 경우 검색속도가 선형적으로 증가한다.&lt;/li&gt;
  &lt;li&gt;데이터베이스는 검색속도를 높이기 위해서 위하여 인덱스라고 불리는 전용 구조를
    제공한다. 제공하는 인덱스 형식은 두가지인데, clustered index와 nonclustered
    index이다.&lt;/li&gt;
  &lt;li&gt;clustered index는 B-Tree로 clustered key(단일컬럼 혹은 복합컬럼)를 기준으로
    루트(Root) 노드와 중간(Intermediate) 노드, 말단(Leaf)노드로 구성되는데 루트와
    중간 노드는 인텍스 페이지(index pages)를 담고 있고, 말단 노드는 테이블
    데이터열(data rows)로 구성된 데이터 페이지(data pages)를 가진다. 각 페이지는
    B-Tree상에 동일 수준에 인접한 노드의 페이지와 double linked list로 연결되어
    있다. 테이블 데이터가 clustered index를 구성하는 B-Tree의 말단 노드의 데이터
    페이지로 직접 접근이 가능하도록 되어 있기에, clustered index는 데이블당 하나로
    제한되어 clutered key를 기준으로 정렬되는 것을 알 수 있다. 따라서, Primary
    key를 테이블에 정의할 경우 해당 key를 기준으로 clustered index가 만들어 진다,
    즉 Primary key constraint라고 함.&lt;/li&gt;
  &lt;li&gt;nonclustered index는 clustered index와 유사하게 B-Tree 구조로 만들어 진다.
    clustered index와의 차이는 해당 B-Tree의 말단 노드에 테이블 데이터열을
    포함하는 데이터 페이지가 아닌 테이블의 key값 (Primary Key 및 Index 생성시
    포함된 컬럼값들)을 포인팅하는 포인터(Rows Pointers)를 가진다(포인터를 통해서
    Primary key를 얻고, primary key 기반의 clustered index를 사용하여 다른 컬럼
    데이터에 접근할 수 있다). 테이블의 데이터열과는 별개로 저장되므로, 하나의
    테이블에 여러개의 nonclustered index를 만들어서 사용할 수 있다. 대신, 검색시
    데이터에 접근하기 위해서 포인터를 이용해야 하기 때문에 한번 더 I/O 접근이
    필요하며, 인덱스에 포함되지 않은 다른 컬럼 데이타를 얻기 위해서는 2차 검색을
    할 필요가 있다(이 부분은 indexes with included columns으로 필요한 데이터
    컬럼을 미리 인덱스 생성시 포함할 경우 2차 검색이 필요없음). 특정 컬럼을
    기준으로 검색 속도를 높이려고 하면 'CREATE [NONCLUSTERED] INDEX'로
    nonclustered index를 만들어서 사용하는 것이 필요하다.&lt;/li&gt;
  &lt;li&gt;기본적으로 table full scan과 index scan의 차이는 선형(linear) vs. 로그(log)의
    차이가 있기에 검색속도에 많은 영향을 주므로 인덱스를 잘 활용할 필요가 있다.
    Index는 부가적인 데이터 구조이므로 space complexity를 고려할 필요가 있는 경우
    time-space tradeoff 추가 고려 필요하다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Rename Indexes, Diable/Enable Indexes, Unique Indexes, Drop Indexes&lt;/h2&gt;
&lt;h2&gt;Indexes with included columns&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;Email을 기준으로 nonclustered index 생성시 first_name, last_name 컬럼을 포함할
    경우 email의 특정값을 이용하여 customer_id, first_name, last_name을 select할
    경우 customer_id를 이용한 clustered index 2차 검색을 하지 않고 바로
    first_name, last_name을 얻을 수 있어서 검색속도를 향상 시킬 수 있다. 이에 대한
    예는 아래와 같다.&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;src&quot; lang=&quot;sql&quot;&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;UNIQUE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INDEX&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ix_cust_email_inc&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sales&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;customers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;INCLUDE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;first_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;last_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;/pre&gt;
&lt;h2&gt;Filtered Indexes&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;nonclustered index는 쿼리 성능향상에 크게 기여하지만 스토리지 및 유지관리
    측면에서 비용이 수반된다. 인덱스 키 컬럼 데이터의 카피본이 저장되어야 하고,
    테이블 Rows에 대한 삽입, 업데이트, 삭제시 연관된 nonclustered index에 대한
    업데이트가 요구된다. 단지 테이블의 일부만이 쿼리되는 경우는 매우
    비효율적이기에 NULL이 많이 포함된 sparse columns에 대하여 filtered indexes가
    사용된다. 다음과 같이 sales.customers 테이블의 phone 커럼에 대하여 filtered
    index를 만들 수 있다. phone이 NULL인 rows는 nonclustered index에 포함되지
    않는다.&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;src&quot; lang=&quot;sql&quot;&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INDEX&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ix_cust_phone&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sales&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;customers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;phone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;phone&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;IS&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;/pre&gt;
&lt;h2&gt;Indexes on computed columns&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;아래와 같이 email의 로컬 파트를 계산하여 쿼리할 경우 customer_id 기반
    clustered index 전체를 스캔해야 하기에 매우 비효율적인다. 이러한 경우 computed
    column을 추가하여 해당 컬럼에 nonclustered index를 생성하여 검색속도를 높일 수
    있다.&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;src&quot; lang=&quot;sql&quot;&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;first_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;last_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;sales&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;customers&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;SUBSTRING&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CHARINDEX&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;#&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;39&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;@&amp;amp;#&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;39&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;#&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;39&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;garry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;espinoza&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;#&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;39&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;/pre&gt;
&lt;ul&gt;
  &lt;li&gt;Oracle 경우 function-based indexes, PostgreSQL 경우 expression-based indexes를
    각각 지원하는 반면, SQL Server 경우 다음과 같이 새로운 컬럼을 추가하고, 해당
    컬럼으로 인덱스를 생성하여 지원한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;src&quot; lang=&quot;sql&quot;&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span class=&quot;k&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TABLE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sales&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;customers&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;ADD&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;email_local_part&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SUBSTRING&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CHARINDEX&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;#&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;39&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;@&amp;amp;#&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;39&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INDEX&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ix_cust_email_local_part&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ON&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sales&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;customers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;email_local_part&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;/pre&gt;
&lt;h1&gt;Stored Procedures&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;SP(Stored Procedure)는 하나 이상의 Transact-SQL 문장을 논리적인 단위로
    그룹화하기 위하여 사용된다. SP는 SQL 서버에 이름이 부여된 객체로 저장되며,
    최초로 호출되는 시점에 실행 계획이 생성되어 캐쉬에 저장된다. SQL 서버는 실행
    계획을 캐쉬에서 재사용하기에 매우 빠르고 안정적으로 SP를 실행할 수 있다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;A basic guide to SP, Parameters, Variables, Output Parameters&lt;/h2&gt;
&lt;h2&gt;Control-of-Flow Statements : BEGIN&amp;#8230;END, IF ELSE, WHILE, BREAK/CONTINUE&lt;/h2&gt;
&lt;h2&gt;Cursors, Handling Exceptions, Dynamic SQL&lt;/h2&gt;
&lt;h1&gt;User-defined Functions&lt;/h1&gt;
&lt;h2&gt;User-defined scalar functions&lt;/h2&gt;
&lt;h2&gt;Table varialbes&lt;/h2&gt;
&lt;h2&gt;Table-valued functions&lt;/h2&gt;
&lt;h2&gt;Removing user-defined functions&lt;/h2&gt;
&lt;h1&gt;Triggers&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;DML(Data Manipulation Language) triggers은 테이블에 대한 INSERT, UPDATE,
    DELETE시 자동적으로 호출되는 트리거이며, DDL(Data Definition Lanaguage)
    triggers는 CREATE, ALTER, DROP 등 스키마 변경시 호출되거나 DDL-like
    operations을 수행하는 SP에 반응하여 호출된다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Creating a trigger in SQL Server&lt;/h2&gt;
&lt;h2&gt;Creating an INSTEAD OF trigger&lt;/h2&gt;
&lt;h2&gt;Creating a DDL trigger&lt;/h2&gt;
&lt;h2&gt;Enabling/Diabling triggers&lt;/h2&gt;
&lt;h2&gt;Viewing the definition of a trigger&lt;/h2&gt;
&lt;h2&gt;Listing all triggers in SQL Server&lt;/h2&gt;
&lt;h2&gt;Removing triggers&lt;/h2&gt;
&lt;h1&gt;Functions&lt;/h1&gt;
&lt;h2&gt;Aggregate Functions&lt;/h2&gt;
&lt;h2&gt;Date Functions&lt;/h2&gt;
&lt;h2&gt;String Functions&lt;/h2&gt;
&lt;h2&gt;System Functions&lt;/h2&gt;
&lt;h2&gt;Window Functions&lt;/h2&gt;</content><author><name>xroger88</name></author><category term="sql" /><category term="tutorial" /><summary type="html">Microsoft SQL 서버에 대하여 기본 학습이 필요하여 이 문서를 작성합니다. 학습내용은 sqlservertutorial.net에서 제공되는 샘플 DB와 설명을 기초하였으니 자세한 내용이 필요할 경우 해당 사이트를 참조하기 바랍니다. SQL Express 2019 설치 및 구성 윈도우즈 로그인이 아닌 SQL 서버 로그인이 필요할 경우 sa 계정을 활성화 시켜 주어야 함 (SQL Server Mananagement Studio 설치후 설정 가능) 외부에서 SQL 서버 접근이 필요할 경우 TCP 포트를 추가로 설정해 주어야 함 (SQL Server Configuration Manager를 활용하여 TCP 사용여부 및 고정포트 설정) 기본은 동적포트를 사용하고 있기에 고정포트를 사용하도록 하고, 윈도우 방화벽 inbound 규칙을 추가하여 해당 포트에 대한 접근이 가능하도록 조치해야 함. SQL Server 2019 설치 이후 SQL Server Configuration Manager는 C:\windows\system32\SQLServerMananger15.msc 사용 (Windows 10 기준) Windows 10 방화벽 설정은 c:\windows\system32\WF.msc 사용 Sample DB 다운로드 및 SQL Server DB 업로드 참조: https://www.sqlservertutorial.net/load-sample-database/ BikeStores DB 생성, 스키마 생성, 테이블 정의 및 Sample Data 업로드 수행 데이블 생성이나 데이터 업로드이후 Management Studio에서 갱신이 안되는 경우 재연결 필요 Table, View, Indexed View 복잡한 로직이 들어간 쿼리의 경우, 특히 테이블간의 멀티 조인으로 결과를 얻고자 하는 경우, 뷰를 생성하여 사용할 수 있다. 뷰의 경우 가상의 테이블 역할을 하기에 단순 쿼리로 필요한 데이터를 추출할 수 있다. 예를 들면, CREATE VIEW product_master WITH SCHEMABINDING AS SELECT product_id, product_name, model_year, list_price, brand_name, category_name FROM production.products p INNER JOIN production.brands b ON b.brand_id = p.brand_id INNER JOIN production.categories c ON c.category_id = p.category_id; products, brands, cateogries 테이블을 조인하여 얻은 결과를 product_master 뷰로 만든 예를 보여주고 있다. 여기서 WITH SCHEMABINDING은 현재의 뷰에 사용된 테이블의 스키마가 변경될 경우 우선 해당 뷰를 먼저 삭제하고 진행해야 함을 의미한다. 'SELECT * FROM product_master' 쿼리를 실행할 경우 products, brands, categories 테이블이 참조는 것으로 알 수 있다. 자주 변경되지 않는 데이터를 대상으로 성능을 고려하여 Indexed View를 만들어 사용할 수 있다. 위와 같아 뷰를 만들고, CREATE UNIQUE CLUSTERED INDEX ucidx_product_id ON production.product_master(product_id); 위 명령을 이용하여 클러스터드 INDEX를 만들어서 뷰의 내용을 인덱스화하여 별도 저장하므로서 읽기 성능을 높일 수 있다. Indexes 인덱스는 쿼리 속도를 높이기 위하여 요구되는 테이블/뷰에 연관된 특별한 데이터 구조, 즉 B-Tree (Balanced Tree)이다. Clustered Indexes vs. NonClustered Indexes Primary Key가 지정되지 않은 테이블의 열(Row)은 Heap라고 불리는 정렬되지 않은 구조에 저장이 된다. 따라서, 테이블 쿼리에 대하여 순차스캔을 진행하므로 데이터가 많을 경우 검색속도가 선형적으로 증가한다. 데이터베이스는 검색속도를 높이기 위해서 위하여 인덱스라고 불리는 전용 구조를 제공한다. 제공하는 인덱스 형식은 두가지인데, clustered index와 nonclustered index이다. clustered index는 B-Tree로 clustered key(단일컬럼 혹은 복합컬럼)를 기준으로 루트(Root) 노드와 중간(Intermediate) 노드, 말단(Leaf)노드로 구성되는데 루트와 중간 노드는 인텍스 페이지(index pages)를 담고 있고, 말단 노드는 테이블 데이터열(data rows)로 구성된 데이터 페이지(data pages)를 가진다. 각 페이지는 B-Tree상에 동일 수준에 인접한 노드의 페이지와 double linked list로 연결되어 있다. 테이블 데이터가 clustered index를 구성하는 B-Tree의 말단 노드의 데이터 페이지로 직접 접근이 가능하도록 되어 있기에, clustered index는 데이블당 하나로 제한되어 clutered key를 기준으로 정렬되는 것을 알 수 있다. 따라서, Primary key를 테이블에 정의할 경우 해당 key를 기준으로 clustered index가 만들어 진다, 즉 Primary key constraint라고 함. nonclustered index는 clustered index와 유사하게 B-Tree 구조로 만들어 진다. clustered index와의 차이는 해당 B-Tree의 말단 노드에 테이블 데이터열을 포함하는 데이터 페이지가 아닌 테이블의 key값 (Primary Key 및 Index 생성시 포함된 컬럼값들)을 포인팅하는 포인터(Rows Pointers)를 가진다(포인터를 통해서 Primary key를 얻고, primary key 기반의 clustered index를 사용하여 다른 컬럼 데이터에 접근할 수 있다). 테이블의 데이터열과는 별개로 저장되므로, 하나의 테이블에 여러개의 nonclustered index를 만들어서 사용할 수 있다. 대신, 검색시 데이터에 접근하기 위해서 포인터를 이용해야 하기 때문에 한번 더 I/O 접근이 필요하며, 인덱스에 포함되지 않은 다른 컬럼 데이타를 얻기 위해서는 2차 검색을 할 필요가 있다(이 부분은 indexes with included columns으로 필요한 데이터 컬럼을 미리 인덱스 생성시 포함할 경우 2차 검색이 필요없음). 특정 컬럼을 기준으로 검색 속도를 높이려고 하면 'CREATE [NONCLUSTERED] INDEX'로 nonclustered index를 만들어서 사용하는 것이 필요하다. 기본적으로 table full scan과 index scan의 차이는 선형(linear) vs. 로그(log)의 차이가 있기에 검색속도에 많은 영향을 주므로 인덱스를 잘 활용할 필요가 있다. Index는 부가적인 데이터 구조이므로 space complexity를 고려할 필요가 있는 경우 time-space tradeoff 추가 고려 필요하다. Rename Indexes, Diable/Enable Indexes, Unique Indexes, Drop Indexes Indexes with included columns Email을 기준으로 nonclustered index 생성시 first_name, last_name 컬럼을 포함할 경우 email의 특정값을 이용하여 customer_id, first_name, last_name을 select할 경우 customer_id를 이용한 clustered index 2차 검색을 하지 않고 바로 first_name, last_name을 얻을 수 있어서 검색속도를 향상 시킬 수 있다. 이에 대한 예는 아래와 같다. CREATE UNIQUE INDEX ix_cust_email_inc ON sales.customers(email) INCLUDE(first_name,last_name); Filtered Indexes nonclustered index는 쿼리 성능향상에 크게 기여하지만 스토리지 및 유지관리 측면에서 비용이 수반된다. 인덱스 키 컬럼 데이터의 카피본이 저장되어야 하고, 테이블 Rows에 대한 삽입, 업데이트, 삭제시 연관된 nonclustered index에 대한 업데이트가 요구된다. 단지 테이블의 일부만이 쿼리되는 경우는 매우 비효율적이기에 NULL이 많이 포함된 sparse columns에 대하여 filtered indexes가 사용된다. 다음과 같이 sales.customers 테이블의 phone 커럼에 대하여 filtered index를 만들 수 있다. phone이 NULL인 rows는 nonclustered index에 포함되지 않는다. CREATE INDEX ix_cust_phone ON sales.customers(phone) WHERE phone IS NOT NULL; Indexes on computed columns 아래와 같이 email의 로컬 파트를 계산하여 쿼리할 경우 customer_id 기반 clustered index 전체를 스캔해야 하기에 매우 비효율적인다. 이러한 경우 computed column을 추가하여 해당 컬럼에 nonclustered index를 생성하여 검색속도를 높일 수 있다. SELECT first_name, last_name, email FROM sales.customers WHERE SUBSTRING(email, 0, CHARINDEX(&amp;amp;#39;@&amp;amp;#39;, email, 0)) = &amp;amp;#39;garry.espinoza&amp;amp;#39;; Oracle 경우 function-based indexes, PostgreSQL 경우 expression-based indexes를 각각 지원하는 반면, SQL Server 경우 다음과 같이 새로운 컬럼을 추가하고, 해당 컬럼으로 인덱스를 생성하여 지원한다. ALTER TABLE sales.customers ADD email_local_part AS SUBSTRING(email, 0, CHARINDEX(&amp;amp;#39;@&amp;amp;#39;, email, 0)); ;; CREATE INDEX ix_cust_email_local_part ON sales.customers(email_local_part); Stored Procedures SP(Stored Procedure)는 하나 이상의 Transact-SQL 문장을 논리적인 단위로 그룹화하기 위하여 사용된다. SP는 SQL 서버에 이름이 부여된 객체로 저장되며, 최초로 호출되는 시점에 실행 계획이 생성되어 캐쉬에 저장된다. SQL 서버는 실행 계획을 캐쉬에서 재사용하기에 매우 빠르고 안정적으로 SP를 실행할 수 있다. A basic guide to SP, Parameters, Variables, Output Parameters Control-of-Flow Statements : BEGIN&amp;#8230;END, IF ELSE, WHILE, BREAK/CONTINUE Cursors, Handling Exceptions, Dynamic SQL User-defined Functions User-defined scalar functions Table varialbes Table-valued functions Removing user-defined functions Triggers DML(Data Manipulation Language) triggers은 테이블에 대한 INSERT, UPDATE, DELETE시 자동적으로 호출되는 트리거이며, DDL(Data Definition Lanaguage) triggers는 CREATE, ALTER, DROP 등 스키마 변경시 호출되거나 DDL-like operations을 수행하는 SP에 반응하여 호출된다. Creating a trigger in SQL Server Creating an INSTEAD OF trigger Creating a DDL trigger Enabling/Diabling triggers Viewing the definition of a trigger Listing all triggers in SQL Server Removing triggers Functions Aggregate Functions Date Functions String Functions System Functions Window Functions</summary></entry><entry><title type="html">Transducer 개념 이해 (Clojure 언어)</title><link href="/2020/03/17/tranducer.html" rel="alternate" type="text/html" title="Transducer 개념 이해 (Clojure 언어)" /><published>2020-03-17T00:00:00+09:00</published><updated>2020-03-17T00:00:00+09:00</updated><id>/2020/03/17/tranducer</id><content type="html" xml:base="/2020/03/17/tranducer.html">&lt;h1&gt;Understanding transducer in clojure&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;참조: https://labs.uswitch.com/transducers-from-the-ground-up-the-essence/&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Basics&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;map, filter 와 같이 입력 스트림을 받아서 특정한 처리를 한 후 출력 스트림으로
    반환하는 다양한 함수가 존재 한다. 이러한 함수들의 경우 입력을 접근하는 방식,
    출력을 내어 주는 방식, 입력 요소에 대하여 출력 요소로 매핑하는 일련의 단계를
    반복하는 루프 기능 등 본질적인 기능은 같으나 다르게 구현되어야 한다.&lt;/li&gt;
  &lt;li&gt;다르게 구현될 수 있는 부분은 (1) 입력되는 스트림/시퀀스/콜렉션으로 부터
    하나의 구성요소(아이템)를 얻어서 추가적인 변환을 하는데 적용할 아이템
    변환함수, (2) 누적된 출력값(스트림/시퀀스/콜렉션)과 변환된 입력값을 인자로
    받아서 출력값을 재구성하는 리듀스함수 등으로 추상화될 수 있다.&lt;/li&gt;
  &lt;li&gt;예들들면, 클로저 라이브러리에서 제공하는 컬렉션 및 스트림 처리 함수들 cat, mapcat,
    remove, take, take-while, take-nth, drop, drop-while, replace, partition-by,
    partition-all, keep-indexed, map-indexed, distint, interpose, dedupe,
    random-sample, &amp;#8230; 등 이 모든 함수들에 대하여 transport(stream)/sequence/collection
    타입에 따라서 같은 함수를 매번 다르게 구현을 해야 하는냐? 한번 구현하여 여러
    군데에서 사용할 수는 없을까? 이 질문에 대한 해결책이 transduer이다.&lt;/li&gt;
  &lt;li&gt;transduer(translating+reducing)는 어떤 동작의 본질과 연속된 입력과 처리, 출력의 흐름을 분리하여
    입력, 처리, 출력으르 구성된 루프(or 이터레이션/리커전) 구조를 기반으로 본질에
    해당하는 동작을 수행하도록 하는 패턴을 추상화한 것이다. 여기서 입력은 입력
    스트림/시퀀스/콜렉션에서 입력 아이템을 하나씩 접근하는 것을 의미하고, 처리란
    (1) 입력 아이템에 대하여 transforming function를 적용하여 변환된 값을 만드는
    부분과 (2) 지금까지 누적된 결과값과 변환된 값을 적용하여 새로운 누적 결과값을
    만드는 reducing function을 적용하는 부분을 의미한다. 출력은 처리의
    결과값을 출력 스트림/시퀀스/콜렉션에 반영하는 것을 의미한다. 이 모든 과정은
    reduce 함수가 가지는 기본 기능을 확장하여 구현될 수 있다.&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;src&quot; lang=&quot;clojure&quot;&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-clojure&quot; data-lang=&quot;clojure&quot;&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;defn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;not=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;#&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;39&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;() coll)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;first&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;rest&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;/pre&gt;
&lt;ul&gt;
  &lt;li&gt;위 리듀스 함수는 파라메터중에 하나인 결과값을 누적한다. 이러한 재귀형태는
    반복적이며, loop-recur로 변환이 되면 스택을 소비하지 않게 구현될 수 있다. *리듀스*에
    대한 흥미있는 측면은 무엇을 변환하고자 하는 의도(의미)로 부터 반복 개념을
    분리한 것에 있다.&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;src&quot; lang=&quot;clojure&quot;&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-clojure&quot; data-lang=&quot;clojure&quot;&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;defn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;not=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;#&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;39&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;() coll)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;first&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;rest&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;defn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mapping&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;el&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;rf&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;inc&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;el&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;mapping&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;conj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;defn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filtering&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;el&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;odd?&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;el&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;rf&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;el&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;filtering&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;conj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;/pre&gt;
&lt;ul&gt;
  &lt;li&gt;위 코드에서 리듀스 함수를 활용하여 mapping과 filtering을 처리를 할 때,
    mapping과 filtering의 차이는 새로운 입력값에 대하여 매핑된 출력값을 만드는
    것의 차이라는 것을 알 수 있다. 따라서, 리듀스 함수의 규약에 따라 reducing
    function f (result, input)를 리턴하는 lamda function을 만들어서 result과
    input을 새로운 출력값으로 매핑하는 함수(예, conj)를 파라미터로 추상화한다. 더
    들어가면, 매핑의 경우 inc 그리고 필터링의 경우 odd?와 같은 기능함수가 달라 질
    수 있으므로 이를 파라미터로 추상화하면 다음과 같다.&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;src&quot; lang=&quot;clojure&quot;&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-clojure&quot; data-lang=&quot;clojure&quot;&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;defn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mapping&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;el&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;rf&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;el&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;mapping&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;inc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;conj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;defn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filtering&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pred&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;el&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pred?&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;el&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;rf&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;el&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;filtering&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;odd?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;conj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;/pre&gt;
&lt;ul&gt;
  &lt;li&gt;위 코드의 함수명을 다시 정리하면 다음과 같고, 이것이 clojure 표준
    라이브러리에서 제공하는 map, filter에 대한 transducer이다. 인수의 갯수에
    따라서 일반적인 map, filter가 될 수도 있고, 하나의 인수를 가지므로서
    transducer가 될 수 있다.&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;src&quot; lang=&quot;clojure&quot;&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-clojure&quot; data-lang=&quot;clojure&quot;&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;defn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;el&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;rf&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;el&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;defn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pred&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;el&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pred&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;el&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;rf&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;el&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;transduce&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;inc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;conj&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;; same as: (reduce ((map inc) conj) [] (range 10))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;; transducer-awareness in many other places, the following for instance,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;; are also possible and remove the need for an explicit conj:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;sequence&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;inc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;into&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;inc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;/pre&gt;
&lt;h1&gt;Composibility&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;transduer는 위에서 살펴본 map, filter transducer 버전과 같이 순차 반복 구조로 부터 변환(transforming) 및 리듀스(reducing)
    함수들을 분리한다. 이러한 디자인의 흥미로운 결과는 transducers을 조합하여
    새로운 transducer를 만들어 낼 수 있다는 것이다.&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;src&quot; lang=&quot;clojure&quot;&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-clojure&quot; data-lang=&quot;clojure&quot;&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inc-and-filter&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;comp&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;inc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;odd?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;special+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;inc-and-filter&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;special+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;; 1&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;special+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;; 4&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;special+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;; 25&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;odd?&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;inc&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;; 25&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;transduce&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;comp&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;inc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;odd?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;; 25&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;
&lt;/pre&gt;
&lt;ul&gt;
  &lt;li&gt;transducers를 조합하는 것은 값을 리턴하는 함수를 조합하는 것과 실행순서가
    다름을 인지해야 한다. 예를 들면 (comp (partial + 1) (partial - 2))는 입력 x에
    대하여 (- 2 x) 결과값에 +1이 되는 식으로 조합이된다. 이는 comp 자체가
    right-left 방향으로 함수 조합이 이루어 지기 때문이다. (comp f1 f2 f3)는
    f1(f2(f3))로 평가가 이루지기 때문이다. 조합되는 각 함수 결과가 하나의 값이라면
    평가순서는 right-left로 이루어진 반면 결과가 함수(즉 computation)라면 실제
    평가는 left-right로 이루어지는 것을 주지해야 한다. transduers의 조합은 따라서
    평가가 left-right로 이루어지며 reducing 함수의 result와 input에 관련하여
    transformation 타입에 따라서 input을 변형하거나 상태에 따라서
    추가되거나(injecting) 제거되거나(filtering) 될 수 있다. 최종적으로 redecing
    function에 result, 변형된 input이 적용된 결과를 얻는다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Reuse across transports&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;트랜스듀서(transducer)에 적용되는 컬렉션은 트랜스듀서와 완전히 분리되어
    적용되기 때문에 다른 트랜스포트(transport)를 활용하여 트랜스듀서 재사용이
    가능합니다. 여기서 트랜스포트는 아이템으로 구성된 콘렉션이 반복되는 방법을
    의미한다. 표준 라이브러리에 있는 대부분의 트랜스포트 중에 하나는 순차적인 반복
    즉, map 또는 filter와 같이 시퀀스 함수를 사용한다. 그러나, 다른 종류의
    트랜스포트가 있다. 예를들면, core.async 라이브러리는 채널(channel)이라 부르는
    추상화된 데이터 구조(blocking queue 동작과 유사함)를 통한 반복(즉, 스트림 처리)을 구현한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Custom transducers&lt;/h1&gt;
&lt;h1&gt;A logging (stateless) transducer&lt;/h1&gt;
&lt;h1&gt;An interleave (stateful) transducer&lt;/h1&gt;
&lt;h1&gt;Laziness&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;표준 라이브러리에서 트랜스듀서를 적용하는 4가지 방식이 있다. 입력을 점진적으로
    소비하면서 게으르게 트랜스듀서 체인(transducer chain)을 적용하는데 관심이
    있다면, 그러한 목적으로 설계된 sequence와 eduction을 사용할 수 있다. 입력에
    대하여 다중 평가(해석)이 요구되는 경우, eduction은 캐슁 없이 다중 평가를
    수행하는 반면 sequence는 한번 평가되면 메모리에 캐쉬되어 나중에 참조된다. 어떤
    방식을 선택하는냐는 memory-computation trade-off의 문제이다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Parallelism&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;core.async의 pipelines, fold 등에 관하여, fold는 &amp;#8220;divde and conquer&amp;#8221; 모델에
    기반하여 병렬화를 지원한다. 처리해야할 일을 병렬처리가 가능한 꾸러미로 나누고
    각 꾸러미를 동시에 병렬처리(계산)하고, 각 꾸러미의 결과를 다시 최종 결과로
    결합한다.&lt;/li&gt;
  &lt;li&gt;pipelines 및 fold 모두는 상태를 기억하는 트랜스듀서가 포함되지 않아야 작동 가능하다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;Resources&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;The blog post by Rich Hickey introducing transducers&lt;/li&gt;
  &lt;li&gt;The official transducer reference&lt;/li&gt;
  &lt;li&gt;Christophe’s Grand extended transducer library&lt;/li&gt;
  &lt;li&gt;Timothy Baldrige’s screencast&lt;/li&gt;
  &lt;li&gt;The content of this post is inspired by a book by the same author of this
    article. For additional information and extended examples, please have a look
    Clojure Standard Library: an Annotated Guide.&lt;/li&gt;
&lt;/ul&gt;</content><author><name>xroger88</name></author><category term="transduer" /><category term="clojure" /><summary type="html">Understanding transducer in clojure 참조: https://labs.uswitch.com/transducers-from-the-ground-up-the-essence/ Basics map, filter 와 같이 입력 스트림을 받아서 특정한 처리를 한 후 출력 스트림으로 반환하는 다양한 함수가 존재 한다. 이러한 함수들의 경우 입력을 접근하는 방식, 출력을 내어 주는 방식, 입력 요소에 대하여 출력 요소로 매핑하는 일련의 단계를 반복하는 루프 기능 등 본질적인 기능은 같으나 다르게 구현되어야 한다. 다르게 구현될 수 있는 부분은 (1) 입력되는 스트림/시퀀스/콜렉션으로 부터 하나의 구성요소(아이템)를 얻어서 추가적인 변환을 하는데 적용할 아이템 변환함수, (2) 누적된 출력값(스트림/시퀀스/콜렉션)과 변환된 입력값을 인자로 받아서 출력값을 재구성하는 리듀스함수 등으로 추상화될 수 있다. 예들들면, 클로저 라이브러리에서 제공하는 컬렉션 및 스트림 처리 함수들 cat, mapcat, remove, take, take-while, take-nth, drop, drop-while, replace, partition-by, partition-all, keep-indexed, map-indexed, distint, interpose, dedupe, random-sample, &amp;#8230; 등 이 모든 함수들에 대하여 transport(stream)/sequence/collection 타입에 따라서 같은 함수를 매번 다르게 구현을 해야 하는냐? 한번 구현하여 여러 군데에서 사용할 수는 없을까? 이 질문에 대한 해결책이 transduer이다. transduer(translating+reducing)는 어떤 동작의 본질과 연속된 입력과 처리, 출력의 흐름을 분리하여 입력, 처리, 출력으르 구성된 루프(or 이터레이션/리커전) 구조를 기반으로 본질에 해당하는 동작을 수행하도록 하는 패턴을 추상화한 것이다. 여기서 입력은 입력 스트림/시퀀스/콜렉션에서 입력 아이템을 하나씩 접근하는 것을 의미하고, 처리란 (1) 입력 아이템에 대하여 transforming function를 적용하여 변환된 값을 만드는 부분과 (2) 지금까지 누적된 결과값과 변환된 값을 적용하여 새로운 누적 결과값을 만드는 reducing function을 적용하는 부분을 의미한다. 출력은 처리의 결과값을 출력 스트림/시퀀스/콜렉션에 반영하는 것을 의미한다. 이 모든 과정은 reduce 함수가 가지는 기본 기능을 확장하여 구현될 수 있다. (defn reduce [f result coll] (if (not= &amp;amp;#39;() coll) (reduce f (f result (first coll)) (rest coll)) result))</summary></entry></feed>